# Configuration example for bfm_test 
#
# - Options are separated by lines, and values by coma ','
# - Write an option in multiple lines using backslash '\' at the end of the line
# - Use two single quotes '' to specify empty values.
#
# Avalaible kays are:
# - NAME     : Name of the test (mandatory)
# - ACTIVE   : Specify execution stage to perform
#              - Valid values are (you can combine them):
#                - Y: all execution stages: generation, running and analysis (default)
#                - N: no execution. Test will not be generated, run or analyzed. 
#                - G: only generation
#                - R: only running
#                - A: only analysis
# - PRESET   : Name of the preset for using as parameter in bfm_configure (see bfm_configure option '-p')
# - COPY     : Copy other generated test
#              - In generation time, The test will not be generated, only copied and deployed (bfm_configure option '-d')
#              - Source test must exists in tmp directory (use ACTIVE=G to only execute generation of source test) 
# - RUN      : Mode to run the experiment 
#              - Valid values are:
#                - sh:   default, for running in a unix shell
#                - bsub: for running in batch mode
# - PROC     : Number of processors to use in compilation and running (see bfm_configure option '-r')
# - ARCH     : Specify compilation Architecture file (see bfm_configure option '-a')
# - QUEUE    : Specify queue in job mode (see bfm_configure option '-q')
# - PAREXE   : Command to execute in parallel. Ex: openmpirun (see bfm_configure option '-e')
#              - You can use $PROC inside this command
# - PRECMD   : Commands to execute prior compiling and prior running
# - PRERUN   : Commands to execute prior running 
# - FORCING  : Forcing files to link in the run directory (see bfm_configure option '-i')
# - VALGRIND : Valgrind command and options for analysis
# - COMPARE  : Directory with test output to compare results
#              - Run command "nccmp -V" first to check if nccmp command works
# - COMPTHR  : Compare threshold for nccmp command (default 1e-3)


# Configuration to run in Athena
NAME    = test_GYRE, test_GYRE_BENTHIC, test_STD_PEL_GFMEM, test_STD_PEL_IF   , test_STD_PEL_GF   , test_PELAGOS2, test_STD_BEN      , test_STD_CO2      , test_STD_KOB         , test_STD_MED     , test_STD_ICE     ,
ACTIVE  = Y        , Y                , Y                 , Y                 , Y                 , Y            , Y                 , Y                 , Y                    , Y                , Y                ,
PRESET  = GYRE_BFM , GYRE_BFM_BENTHIC , STANDALONE_PELAGIC, STANDALONE_PELAGIC, STANDALONE_PELAGIC, PELAGOS2     , STANDALONE_BENTHIC, STANDALONE_CO2TEST, STANDALONE_KOBBEFJORD, STANDALONE_MEDSEA, STANDALONE_SEAICE,
RUN     = bsub     , bsub             , bsub              , bsub              , sh                , bsub         , bsub              , bsub              , bsub                 , bsub             , bsub             ,
PROC    = 16       , 16               , ''                , ''                , ''                , ''           , ''                , ''                , ''                   , ''               , ''               ,
ARCH    = ''       , ''               , gfortran_debug.inc, ifort.inc         , gfortran.inc      , ifort_athena , ''                , ''                , ''                   , ''               , ''               ,
QUEUE   = poe_long , poe_long         , ''                , ''                , ''                , ''           , ''                , ''                , ''                   , ''               , ''               ,
PRECMD  = export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          module load NETCDF/netcdf-4.2.1.1, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          module load NETCDF/netcdf-4.2.1.1, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH, \
          export NETCDF=/users/home/ans040/local; export LD_LIBRARY_PATH=/users/home/ans040/local/lib:$LD_LIBRARY_PATH,
FORCING = ''                                                    , \
          ''                                                    , \
          ''                                                    , \
          ''                                                    , \
          ''                                                    , \
          /work/ans040/FORCING/NEMO/*;/work/ans040/FORCING/BFM/*, \
          ''                                                    , \
          ''                                                    , \
          ''                                                    , \
          ''                                                    , \
          ''                                                    ,
VALGRIND = ''                                          , \
           ''                                          , \
           valgrind --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20 --track-fds=yes --xml=yes --log-file=valgrind_log.txt --xml-file=valgrind_analysis.xml, \
           ''                                          , \
           valgrind --tool=massif --run-libc-freeres=no, \
           valgrind --tool=cachegrind                  , \
           valgrind --tool=cachegrind                  , \
           valgrind --tool=cachegrind                  , \
           valgrind --tool=cachegrind                  , \
           valgrind --tool=cachegrind                  , \
           valgrind --tool=cachegrind                  ,
# run command "nccmp -V" first to check if nccmp command works
COMPARE = /work/ans040/BFM_TEST/test_GYRE        , \
          /work/ans040/BFM_TEST/test_GYRE_BENTHIC, \
          /work/ans040/BFM_TEST/test_STD_PEL     , \
          /work/ans040/BFM_TEST/test_STD_PEL     , \
          /work/ans040/BFM_TEST/test_STD_PEL     , \
          /work/ans040/BFM_TEST/test_PELAGOS2    , \
          /work/ans040/BFM_TEST/test_STD_BEN     , \
          /work/ans040/BFM_TEST/test_STD_CO2     , \
          /work/ans040/BFM_TEST/test_STD_KOB     , \
          /work/ans040/BFM_TEST/test_STD_MED     , \
          /work/ans040/BFM_TEST/test_STD_ICE     ,
